import{j as e,A as j,m as v}from"./ui-Dz3VGjCi.js";import{r as m,a as k}from"./vendor-DBl2kvvH.js";import{c as E}from"./index--vVcZAxM.js";const A=({isOpen:r,onClose:a,children:f,title:u,size:d="md"})=>{const h=m.useRef(null);m.useEffect(()=>{var o,n,i,l;if(r){document.body.style.overflow="hidden",document.body.style.overscrollBehavior="contain";try{const t=(o=window.Telegram)==null?void 0:o.WebApp;(n=t==null?void 0:t.disableVerticalSwipes)==null||n.call(t)}catch(t){}}else{document.body.style.overflow="unset",document.body.style.overscrollBehavior="auto";try{const t=(i=window.Telegram)==null?void 0:i.WebApp;(l=t==null?void 0:t.enableVerticalSwipes)==null||l.call(t)}catch(t){}}return()=>{var t,s;document.body.style.overflow="unset",document.body.style.overscrollBehavior="auto";try{const c=(t=window.Telegram)==null?void 0:t.WebApp;(s=c==null?void 0:c.enableVerticalSwipes)==null||s.call(c)}catch(c){}}},[r]),m.useEffect(()=>{const o=n=>{n.key==="Escape"&&r&&a()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r,a]),m.useEffect(()=>{const o=h.current;if(!o||!r)return;let n=0;const i=t=>{n=t.touches[0].clientY},l=t=>{const s=o,x=t.touches[0].clientY-n,b=s.scrollTop<=0,p=s.scrollTop+s.clientHeight>=s.scrollHeight-1,w=x>0,g=x<0;(b&&w||p&&g)&&(t.preventDefault(),t.stopPropagation())};return o.addEventListener("touchstart",i,{passive:!0}),o.addEventListener("touchmove",l,{passive:!1}),()=>{o.removeEventListener("touchstart",i),o.removeEventListener("touchmove",l)}},[r]);const y=e.jsx(j,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[1040]",onClick:a}),e.jsxs(v.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:30,stiffness:300},className:E("fixed z-[1050] bg-surface-card/95 backdrop-blur-xl border-t border-white/20 rounded-t-3xl shadow-xl flex flex-col",{"inset-x-4 bottom-0 max-h-[80vh]":d==="sm","inset-x-0 bottom-0 max-h-[85vh]":d==="md","inset-x-0 bottom-0 max-h-[90vh]":d==="lg","inset-0":d==="full"}),style:{overscrollBehavior:"contain"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1 shrink-0",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-white/20"})}),u&&e.jsxs("div",{className:"shrink-0 bg-surface-card/95 border-b border-white/10 px-6 py-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-content-primary",children:u}),e.jsx("button",{onClick:a,className:"text-content-tertiary hover:text-content-primary transition-colors p-1","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{ref:h,className:"flex-1 overflow-y-auto overscroll-contain",style:{WebkitOverflowScrolling:"touch"},children:f})]})]})});return k.createPortal(y,document.body)};export{A as M};
