var N=(a,d,n)=>new Promise((s,x)=>{var m=r=>{try{u(n.next(r))}catch(c){x(c)}},y=r=>{try{u(n.throw(r))}catch(c){x(c)}},u=r=>r.done?s(r.value):Promise.resolve(r.value).then(m,y);u((n=n.apply(a,d)).next())});import{j as e,m as S,z as g}from"./ui-Dz3VGjCi.js";import{r as h}from"./vendor-DBl2kvvH.js";import{u as P}from"./useTelegramUser-BsW_Cs6Z.js";import{u as z,g as w,S as b,a as v,b as k,e as D}from"./index--vVcZAxM.js";import{u as I}from"./audioSettingsStore-U73_cNab.js";const L=[{value:"custom",labelKey:"modeCustom",descKey:"modeCustomDesc",icon:"âœï¸"},{value:"standard",labelKey:"modeStandard",descKey:"modeStandardDesc",icon:"ðŸŽµ"},{value:"instrumental",labelKey:"modeInstrumental",descKey:"modeInstrumentalDesc",icon:"ðŸŽ¹"}],M=["pop","rock","jazz","electronic","hip-hop","classical","ambient"];function O(){const{t:a}=z("audio"),{telegramId:d,isLoading:n}=P(),{sunoSettings:s,isLoading:x,isSaving:m,fetchSettings:y,updateSuno:u}=I(),[r,c]=h.useState("standard"),[p,f]=h.useState("");h.useEffect(()=>{var o,i;const t=d||((i=(o=w())==null?void 0:o.id)==null?void 0:i.toString());t&&y(t)},[d]),h.useEffect(()=>{s&&(c(s.mode),f(s.style))},[s]);const E=t=>{v("light"),c(t)},T=t=>{v("light"),f(o=>{const i=o.split(",").map(l=>l.trim()).filter(Boolean);return i.includes(t)?i.filter(l=>l!==t).join(", "):[...i,t].join(", ")})},C=()=>N(this,null,function*(){var o,i;const t=d||((i=(o=w())==null?void 0:o.id)==null?void 0:i.toString());if(!t){g.error(a("saveError"));return}v("medium");try{yield u(t,{mode:r,style:p}),k("success"),g.success(a("saved")),setTimeout(()=>D(),800)}catch(l){k("error"),g.error(a("saveError"))}});if(n||x)return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(b,{className:"h-16",variant:"rectangular"}),e.jsx(b,{className:"h-40",variant:"rectangular"}),e.jsx(b,{className:"h-32",variant:"rectangular"})]});const j=r!==(s==null?void 0:s.mode)||p!==(s==null?void 0:s.style),K=p.split(",").map(t=>t.trim()).filter(Boolean);return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex-1 p-4 pb-24",children:[e.jsx(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-5",children:e.jsxs("h1",{className:"text-xl font-display font-bold text-content-primary",children:[e.jsx("span",{className:"text-audio-primary",children:"ðŸŽ¸"})," ",a("sunoSettings")]})}),e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"text-xs text-content-tertiary uppercase tracking-wide mb-3",children:a("mode")}),e.jsx("div",{className:"space-y-2",children:L.map(({value:t,labelKey:o,descKey:i,icon:l})=>e.jsx(S.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},onClick:()=>E(t),className:`rounded-xl p-3.5 cursor-pointer transition-all ${r===t?"bg-audio-surface-elevated border-2 border-audio-primary shadow-audio-neon":"bg-audio-surface-card border border-white/5 hover:border-audio-primary/30"}`,children:e.jsxs("div",{className:"flex items-center",style:{columnGap:10},children:[e.jsx("span",{className:"text-lg",children:l}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",style:{columnGap:8},children:[e.jsx("span",{className:"font-semibold text-content-primary text-sm",children:a(o)}),r===t&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-audio-primary/20 text-audio-primary font-medium shrink-0",children:"âœ“"})]}),e.jsx("p",{className:"text-xs text-content-tertiary mt-0.5",children:a(i)})]})]})},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-content-tertiary uppercase tracking-wide mb-2",children:a("style")}),e.jsx("input",{type:"text",value:p,onChange:t=>f(t.target.value),placeholder:a("stylePlaceholder"),className:"w-full px-4 py-2.5 rounded-xl bg-audio-surface-card border border-white/10 text-content-primary placeholder-content-tertiary text-sm focus:outline-none focus:border-audio-primary focus:ring-1 focus:ring-audio-primary/30 transition-colors"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-content-tertiary uppercase tracking-wide mb-2",children:a("stylePresets")}),e.jsx("div",{className:"flex flex-wrap",style:{gap:8},children:M.map(t=>e.jsx("button",{onClick:()=>T(t),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${K.includes(t)?"bg-audio-primary text-white":"bg-white/5 text-content-secondary hover:bg-white/10"}`,children:t},t))})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-audio-surface via-audio-surface to-transparent pt-8",children:e.jsx("button",{onClick:C,disabled:!j||m,className:`w-full py-3 rounded-xl font-semibold text-sm transition-all ${j&&!m?"bg-audio-primary text-white shadow-audio-neon hover:bg-audio-primary-dark active:scale-[0.98]":"bg-white/5 text-content-tertiary cursor-not-allowed"}`,children:a(m?"saving":"save")})})]})}export{O as default};
