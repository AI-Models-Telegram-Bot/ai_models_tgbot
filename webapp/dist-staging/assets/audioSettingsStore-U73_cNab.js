var h=Object.defineProperty;var d=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var v=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&v(e,n,t[n]);if(d)for(var n of d(t))p.call(t,n)&&v(e,n,t[n]);return e};var c=(e,t,n)=>new Promise((s,i)=>{var o=a=>{try{u(n.next(a))}catch(l){i(l)}},f=a=>{try{u(n.throw(a))}catch(l){i(l)}},u=a=>a.done?s(a.value):Promise.resolve(a.value).then(o,f);u((n=n.apply(e,t)).next())});import{a as S,c as y}from"./useTelegramUser-BsW_Cs6Z.js";const g={getSettings:e=>S.get(`/audio-settings/${e}`).then(t=>t.data),updateSettings:(e,t,n)=>S.put(`/audio-settings/${e}`,{function:t,settings:n}).then(s=>s.data),getVoices:e=>S.get("/audio/voices",{params:e}).then(t=>t.data)},m=y((e,t)=>({elevenLabsSettings:null,sunoSettings:null,soundGenSettings:null,voices:[],voicesLoading:!1,isLoading:!1,isSaving:!1,error:null,fetchSettings:n=>c(void 0,null,function*(){e({isLoading:!0,error:null});try{const s=yield g.getSettings(n);e({elevenLabsSettings:s.elevenLabsSettings,sunoSettings:s.sunoSettings,soundGenSettings:s.soundGenSettings,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}}),updateElevenLabs:(n,s)=>c(void 0,null,function*(){e({isSaving:!0,error:null});try{yield g.updateSettings(n,"elevenlabs",s);const i=t().elevenLabsSettings;e({elevenLabsSettings:r(r({},i),s),isSaving:!1})}catch(i){throw e({error:i.message,isSaving:!1}),i}}),updateSuno:(n,s)=>c(void 0,null,function*(){e({isSaving:!0,error:null});try{yield g.updateSettings(n,"suno",s);const i=t().sunoSettings;e({sunoSettings:r(r({},i),s),isSaving:!1})}catch(i){throw e({error:i.message,isSaving:!1}),i}}),updateSoundGen:(n,s)=>c(void 0,null,function*(){e({isSaving:!0,error:null});try{yield g.updateSettings(n,"soundGen",s);const i=t().soundGenSettings;e({soundGenSettings:r(r({},i),s),isSaving:!1})}catch(i){throw e({error:i.message,isSaving:!1}),i}}),fetchVoices:(n,s)=>c(void 0,null,function*(){var i;e({voicesLoading:!0,error:null});try{const o=yield g.getVoices({search:n,category:s});console.log("[AudioStore] fetchVoices result:",{count:(i=o==null?void 0:o.voices)==null?void 0:i.length,total:o==null?void 0:o.total}),e({voices:(o==null?void 0:o.voices)||[],voicesLoading:!1})}catch(o){console.error("[AudioStore] fetchVoices error:",o),e({voicesLoading:!1,voices:[],error:o.message||"Failed to fetch voices"})}})}));export{m as u};
